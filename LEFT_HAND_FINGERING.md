# 左手指法镜像转换说明

## 功能概述

从 v2.7 版本开始，指法分配工具会自动对左手的指法进行镜像转换。

## 转换规则

左手使用与右手镜像的指法编号：

| 算法分配的指法 | 左手实际指法 | 说明 |
|---------------|-------------|------|
| 1 | **5** | 小指 |
| 2 | **4** | 无名指 |
| 3 | **3** | 中指（保持不变） |
| 4 | **2** | 食指 |
| 5 | **1** | 拇指 |

## 为什么需要镜像转换？

### 钢琴指法的对称性

在钢琴演奏中：

- **右手**：从左到右，拇指(1)在内侧，小指(5)在外侧
- **左手**：从右到左，拇指(1)在内侧，小指(5)在外侧

虽然左右手的拇指都是1号手指，但它们在键盘上的位置是相反的：
- 右手拇指(1)在键盘的低音区一侧
- 左手拇指(1)在键盘的高音区一侧

### 算法的统一性

pianoplayer 算法最初是为右手设计的，它假设：
- 1号手指对应较低的位置（键盘左侧）
- 5号手指对应较高的位置（键盘右侧）

当应用到左手时，这个假设需要反转，因为左手在键盘上的方向与右手相反。

## 实现方式

在 [scripts.js](scripts.js) 中：

```javascript
/**
 * 镜像转换左手指法
 * 左手的指法编号需要镜像：1↔5, 2↔4, 3保持不变
 */
function mirrorLeftHandFinger(finger) {
    const mirrorMap = {
        1: 5,
        2: 4,
        3: 3,
        4: 2,
        5: 1
    };
    return mirrorMap[finger] || finger;
}
```

应用转换：

```javascript
// 在分配指法后
if (hand === 'left') {
    finger = mirrorLeftHandFinger(finger);
}
```

## 示例

### 右手C大调音阶（向上）

```
C4: 拇指(1)  → 指法 1
D4: 食指(2)  → 指法 2
E4: 中指(3)  → 指法 3
F4: 拇指(1)  → 指法 1
G4: 食指(2)  → 指法 2
A4: 中指(3)  → 指法 3
B4: 无名指(4) → 指法 4
C5: 小指(5)  → 指法 5
```

### 左手C大调音阶（向下）

```
C3: 小指(5)  → 算法分配1 → **转换为 5** ✓
B2: 无名指(4) → 算法分配2 → **转换为 4** ✓
A2: 中指(3)  → 算法分配3 → **转换为 3** ✓
G2: 食指(2)  → 算法分配4 → **转换为 2** ✓
F2: 拇指(1)  → 算法分配5 → **转换为 1** ✓
E2: 拇指(1)  → 算法分配1 → **转换为 5** ✓
D2: 食指(2)  → 算法分配2 → **转换为 4** ✓
C2: 中指(3)  → 算法分配3 → **转换为 3** ✓
```

## 验证

你可以在可视化器中查看转换后的指法：

1. 上传 JSON 文件到工具
2. 选择手型大小
3. 点击 "📊 Open Visualizer"
4. 查看左手的指法编号是否符合预期

## 兼容性

- ✅ Piano Vision JSON 格式
- ✅ 可视化器显示
- ✅ 所有手型大小 (XXS - XXL)
- ✅ 所有音符类型（白键、黑键、和弦）

## 更新日志

### v2.7 (左手指法镜像) - 2026-01-17
- ✨ 添加左手镜像转换功能
- ✅ 自动转换左手指法编号
- ✅ 保持右手指法不变
- 📝 添加转换说明文档
